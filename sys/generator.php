<?php// Function that creates the createUniverse function (why am I not doing that in PHP?)function defCreateUniverse($name, $sys) {?>    // Generates a new universe    function createUniverse(civs) {        // Set the dimensions of the universe        var width = 42;        var height = 30;                // The system names        var sysnames = [            'Amodar',            'Omic',            'Gatnic',            'Gva',            'Kyky',            'Tado',            'Odot',            'Khiti',            'Mtim',            'Ramsal',            'Chaga',            'Zhiltcho',            'Vanier',            'Xidni',            'Queld',            'Patitil',            'Ragnatil',            'Lichem',            'Sca',            'Ulil',            'Tchat',            'Heid',            'Alag',            'Weiton',            'Ikudan',            'Terral',            'Lunai',            'Telluzi',            'Hadna',            'Dnaha',            'Oemo',            'Ptoldo',            'Ljudui',            'Rhrhiknik'        ];        var planetTypes = world.getPlanetTypes();        var starTypes = world.getStarTypes();        var takenPositions = {};        // Setup the hulls        var colonyHull = new world.Hull('Colony Hull', 1, 1, world.cost(1, 1));        var scoutHull = new world.Hull('Scout Hull', 1, 2, world.cost(1, 1));                // Setup the standard engines and the colony module        var colonyEngine = new world.EngineModule("Flash Engine", 3, 20, world.cost(10, 8));        var scoutEngine = new world.EngineModule("Headslam Engine", 4, 99999, world.cost(5, 8));        var colonyModule = new world.ColonyModule("Aeres Colonization Module", world.cost(8, 5));        // Setup the modules        var engines = [colonyEngine,                       scoutEngine,                       new world.EngineModule("Snail Engine", 1, 40, world.cost(10, 11))];        var sensors = [new world.SensorModule("Tachyon Sensor", world.cost(3, 3)),                       new world.SensorModule("Gamma Sensor", world.cost(3, 3))];        var weapons = [new world.WeaponModule("Ripper", 2, world.cost(3, 4)),                       new world.WeaponModule("Breaker", 4, world.cost(5, 4)),                       new world.WeaponModule("Slapper", 1, world.cost(1, 1))];        var other = [colonyModule];        var mods = {            engines: engines,            sensors: sensors,            weapons: weapons,            other: other        };        // Gets a random integer between 0 and max        function rnd(max) {            return Math.floor(Math.random()*max);        }                // Creates a random position, assuming it is not already occupied        function rndPos() {            do {                var row = rnd(height - 2 ) + 1;                var col = rnd(width - 2) + 1;            } while (takenPositions[row+':'+col] !== undefined);            takenPositions[row+':'+col] = true;            return world.pos(row, col);        }                // Adds new planets to the system        function addPlanets(sys) {            var planetCount = rnd(5);            for (var i = 0; i < planetCount; ++i) {                var planet = new world.Planet(i + 1, sys, planetTypes[rnd(planetTypes.length)], rnd(9) + 1);                sys.planets.push(planet);            }            return sys;        }                // Creates a random system        function rndSystem(name) {            var pos = rndPos();            var starType = starTypes[rnd(starTypes.length)];            var sys = new world.StarSystem(name, pos, starType);            return addPlanets(sys);        }        // Add the modules to the civilization        function createModules(civ) {            civ.modules.addModules(mods);        }        // Create the specs for the civilization        function createSpecs(civ) {            var specs = civ.specs;            specs.addSpec('Colony Ship', colonyHull, colonyEngine, {other: [colonyModule]});            specs.addSpec('Scout', scoutHull, scoutEngine);        }        // Create the ships for the civilization        function createShips(civ) {            var home = civ.home;            civ.specs.create('Colony Ship', home);            for (var i = 0; i < 3; i++) {                civ.specs.create('Scout', home);            }        }                // Create the civilizations        function createCiv(name, type, home) {            var civ = new world.Civ(name, type, home);            createModules(civ);            createSpecs(civ);            createShips(civ);            return civ;        }                // Create the systems and the universe        var systems = sysnames.map(rndSystem);        var uni = new world.Universe(width, height, systems);                // Add the civs to the universe        for (var i = 0; i < civs.length; ++i) {            do {                var s = systems[rnd(systems.length)];            } while (s.planets.length == 0 || s.civs().length > 0);            var civ = createCiv(civs[i].name, civs[i].type, s);            uni.civs.set(civ.name, civ);        }                // Return the universe!        return uni;    }<?php}?>